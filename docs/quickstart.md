# Quickstart guide

## Prerequisites

1. Learn the [basic features](index.md).
1. [Install](installation.md) the OpenAPI CLI tool.

## Getting started

Once you installed the tool, let's dive into what you can do with it.

For testing and demonstration purposes, we will use sample OpenAPI definition file (see it below). Save it to your computer as `petstore.yaml`.

```yaml Sample OpenAPI definition file
openapi: "3.0.0"
info:
  version: 1.0.0
  title: Swagger Petstore
  description: Information about Petstore
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT
servers:
  - url: http://petstore.swagger.io/v1
paths:
  /pets:
    get:
      summary: List all pets
      operationIds: listPets
      tags:
        - pets
      parameters:
        - name: limit
          in: query
          description: How many items to return at one time (max 100)
          required: false
          schema:
            type: integer
            format: int
      responses:
        200:
          description: An paged array of pets
          headers:
            x-next:
              description: A link to the next page of responses
              schema:
                type: string
          content:
            application/json:    
              schema:
                $ref: "#/components/schemas/Pets"
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
    post:
      summary: Create a pet
      operationId: createPets
      tags:
        - pets
      responses:
        201:
          description: Null response
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
  /pets/{petId:
    get:
      summary: Info for a specific pet
      operationId: showPetById
      tags:
        - pets
      parameters:
        - name: petId
          in: path
          required: true
          description: The id of the pet to retrieve
          schema:
            type: string
      responses:
        200:
          description: Expected response to a valid request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Pets"
        default:
          description: unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
components:
  schemas:
    Pet:
      required:
        - id
        - name
      properties:
        id:
          type: integer
          format: int64
        name:
          type: string
        tag:
          type: string
    Pets:
      type: array
      items:
        $ref: "#/components/schemas/Pet"
    Error:
      require:
        - code
        - message
      properties:
        code:
          type: integer
          format: int32
        message:
          type: string
```

### stats

With this command, you can get a quick statistics about the structure of one or more API definition files.

In your terminal, type the following:

```bash
$ openapi stats petstore.yaml
```

You should get the following response:

```bash
$ openapi stats petstore.yaml 
Document: petstore.yaml stats:

🚗 References: 3 
📦 External Documents: 0 
📈 Schemas: 3 
👉 Parameters: 2 
🔗 Links: 0 
➡️ Path Items: 2 
👷 Operations: 3 
🔖 Tags: 1 

petstore.yaml: stats processed in 10ms
```

Okay, now you know some basic information about your definition. But, is it valid? Are you sure that it doesn't contain errors and will be processed properly in your environment? No, you don't. We don't either. Let's check it.

### lint

With this command, you ensure that your OpenAPI definition files do not contain errors. 

In your terminal, type the following:

```bash
$ openapi lint petstore.yaml
```

You should get the following response:

```bash
$ openapi lint petstore.yaml 
No configurations were defined in extends -- using built in recommended configuration by default.

validating petstore.yaml...
[1] petstore.yaml:15:7 at #/paths/~1pets/get/operationIds

Property `operationIds` is not expected here.

Did you mean: operationId ?

13 | get:
14 |   summary: List all pets
15 |   operationIds: listPets
16 |   tags:
17 |     - pets

Error was generated by the spec rule.


[2] petstore.yaml:103:7 at #/components/schemas/Error/require

Property `require` is not expected here.

Did you mean: required ?

101 |     $ref: "#/components/schemas/Pet"
102 | Error:
103 |   require:
104 |     - code
105 |     - message

Error was generated by the spec rule.


[3] petstore.yaml:65:17 at #/paths/~1pets~1{petId/get/parameters/0/name

Path parameter `petId` is not used in the path `/pets/{petId`.

63 |   - pets
64 | parameters:
65 |   - name: petId
66 |     in: path
67 |     required: true

Error was generated by the path-parameters-defined rule.


[4] petstore.yaml:14:7 at #/paths/~1pets/get

Operation object should contain `operationId` field.

12 | /pets:
13 |   get:
14 |     summary: List all pets
15 |     operationIds: listPets
 … |     < 27 more lines >
43 |               $ref: "#/components/schemas/Error"
44 |   post:
45 |     summary: Create a pet

Warning was generated by the operation-operationId rule.


petstore.yaml: validated in 72ms

❌ Validation failed with 3 errors and 1 warning.
run with `--generate-ignore-file` to add all problems to ignore file.
```

Yikes! There are 3 errors!

Don't worry, they were made intentionally to show the power of the tool.

Let's fix the errors. Please, make the following modifications:

```bash line 15
operationIds: --> operationId:
```

```bash line 58
/pets/{petId: --> /pets/{petId}:
```

```bash line 103
require: --> required:
```

Once fixed, run the `lint` command again:

```bash
$ openapi lint petstore.yaml
```

You should get the following response:

```bash
$ openapi lint petstore.yaml 
No configurations were defined in extends -- using built in recommended configuration by default.

validating petstore.yaml...
petstore.yaml: validated in 44ms

Woohoo! Your OpenAPI definition is valid. 🎉
```

Congratulations! You did a great job and now your OpenAPI definition is valid!

### split

With this command, your OpenAPI definition file will be divided into constituent parts to follow the multi-file approach. `split` does the opposite of the [`bundle`](#bundle) command.

In your terminal, type the following:

```bash
$ openapi split petstore.yaml --outDir openapi
```

You should get the following response:

```bash
$ openapi split petstore.yaml --outDir openapi
Document: petstore.yaml is successfully split
 and all related files are saved to the directory: openapi 

petstore.yaml: split processed in 44ms
```

Cool, split completed. But what actually happened?

Open the `openapi` directory. See? That's where the magic took place:

```bash
.
├── components
│   └── schemas
│       ├── Error.yaml
│       ├── Pet.yaml
│       └── Pets.yaml
├── paths
│   ├── pets.yaml
│   └── pets@{petId}.yaml
└── openapi.yaml
```

With the `split` command, you can easily switch to a multi-file structure in a blink of an eye even if your definition file became extremely lengthy.

### bundle

With this command, you can merge standalone files back into a single definition file. `bundle` does the opposite of the [`split`](#split) command.

Let's bundle the definition file that we split earlier.

In your terminal, type the following:

```bash
$ openapi bundle openapi/openapi.yaml --output bundled.yaml
```

You should get the following response:

```bash
$ openapi bundle openapi/openapi.yaml --output bundled.yaml
bundling openapi/openapi.yaml...
📦 Created a bundle for openapi/openapi.yaml at bundled.yaml 46ms.
```

You should now see a new `bundled.yaml` file as a result of the `bundle` command completion. Open this file in your text editor or IDE and compare it with the linted definition file. You can see that both files are the same which means that the `bundle` command executed flawlessly.

### preview-docs

With this command, you can run a server to preview your OpenAPI definition file in real-time mode.

In your terminal, type the following:

```bash
$ openapi preview-docs petstore.yaml 
```

You should get the following response:

```bash
$ openapi preview-docs petstore.yaml 
Using Redoc community edition.
Login with openapi-cli login or use an enterprise license key to preview with the premium docs.


  🔎  Preview server running at http://127.0.0.1:8080

Bundling...


  👀  Watching petstore.yaml and all related resources for changes

Created a bundle for petstore.yaml successfully
```

Navigate to `http://127.0.0.1:8080` and check that your definition file has been served successfully:

![preview-docs](../images/preview-docs.png)

This server support live changes - try to modify your definition file, these modifications will be previewed immediately.

For example, change the version of your Swagger Petstore from `1.0.0` to `1.1.0`:

```yaml petstore.yaml
openapi: "3.0.0"
info:
  version: 1.1.0
  ...
```

You should get the following response:

```bash
watch changed petstore.yaml
watch changed /path-to-your-project/petstore.yaml

Bundling...

Created a bundle for petstore.yaml successfully
GET /: 4.337ms
GET /: 3.825ms
GET /hot.js: 27.698ms
GET /simplewebsocket.min.js: 42.654ms
GET /: 6.77ms
GET /hot.js: 1.639ms
GET /simplewebsocket.min.js: 14.528ms
GET /simplewebsocket.min.js: 1.47ms
GET /hot.js: 1.826ms
GET /openapi.json: 0.499ms
GET /openapi.json: 2.293ms
GET /openapi.json: 0.867ms
```

Navigate to `http://127.0.0.1:8080` and check the updated definition file:

![updated-preview-docs](../images/updated-preview-docs.png)